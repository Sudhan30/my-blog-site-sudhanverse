<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 1200 750" xmlns="http://www.w3.org/2000/svg" font-family="system-ui, -apple-system, sans-serif">
  <defs>
    <linearGradient id="userGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#3b82f6"/>
      <stop offset="100%" stop-color="#1d4ed8"/>
    </linearGradient>
    <linearGradient id="cloudflareGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#f48120"/>
      <stop offset="100%" stop-color="#faad3f"/>
    </linearGradient>
    <linearGradient id="k3sGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#326ce5"/>
      <stop offset="100%" stop-color="#1d4ed8"/>
    </linearGradient>
    <linearGradient id="blogGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#10b981"/>
      <stop offset="100%" stop-color="#059669"/>
    </linearGradient>
    <linearGradient id="pgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#3b82f6"/>
      <stop offset="100%" stop-color="#1d4ed8"/>
    </linearGradient>
    <linearGradient id="prometheusGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#e6522c"/>
      <stop offset="100%" stop-color="#c93e1d"/>
    </linearGradient>
    <linearGradient id="grafanaGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#f59e0b"/>
      <stop offset="100%" stop-color="#d97706"/>
    </linearGradient>
    <linearGradient id="lokiGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#8b5cf6"/>
      <stop offset="100%" stop-color="#6d28d9"/>
    </linearGradient>
    <linearGradient id="fluxGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#5468ff"/>
      <stop offset="100%" stop-color="#316ce4"/>
    </linearGradient>
    <linearGradient id="traefikGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#ec4899"/>
      <stop offset="100%" stop-color="#be185d"/>
    </linearGradient>
    <linearGradient id="ollamaGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#a855f7"/>
      <stop offset="100%" stop-color="#7e22ce"/>
    </linearGradient>
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#0f172a"/>
      <stop offset="100%" stop-color="#1e293b"/>
    </linearGradient>

    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-color="#000" flood-opacity="0.3"/>
    </filter>

    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#94a3b8"/>
    </marker>
  </defs>

  <rect width="1200" height="750" rx="16" fill="url(#bgGrad)"/>
  
  <pattern id="grid" width="30" height="30" patternUnits="userSpaceOnUse">
    <path d="M 30 0 L 0 0 0 30" fill="none" stroke="#ffffff" stroke-width="0.3" opacity="0.05"/>
  </pattern>
  <rect width="1200" height="750" fill="url(#grid)"/>

  <text x="600" y="45" text-anchor="middle" fill="#ffffff" font-size="22" font-weight="700">K3s Blog Cluster - Complete Architecture</text>

  <g filter="url(#shadow)">
    <rect x="20" y="120" width="90" height="60" rx="8" fill="url(#userGrad)"/>
    <text x="65" y="155" text-anchor="middle" fill="white" font-size="12" font-weight="600">User</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="150" y="120" width="100" height="60" rx="8" fill="url(#cloudflareGrad)"/>
    <text x="200" y="145" text-anchor="middle" fill="white" font-size="11" font-weight="600">Cloudflare</text>
    <text x="200" y="163" text-anchor="middle" fill="white" font-size="9">Tunnel + CDN</text>
  </g>

  <rect x="300" y="95" width="880" height="610" fill="#1e293b" stroke="#326ce5" stroke-width="3" rx="8" stroke-dasharray="5,5"/>
  <text x="740" y="125" text-anchor="middle" fill="#326ce5" font-size="16" font-weight="700">K3s Cluster (Mini PC)</text>

  <g filter="url(#shadow)">
    <rect x="320" y="160" width="120" height="60" rx="8" fill="url(#traefikGrad)"/>
    <text x="380" y="185" text-anchor="middle" fill="white" font-size="12" font-weight="600">Traefik</text>
    <text x="380" y="203" text-anchor="middle" fill="white" font-size="9">Ingress</text>
  </g>

  <rect x="480" y="140" width="350" height="200" fill="#1e293b" stroke="#10b981" stroke-width="2" rx="8" stroke-dasharray="5,5"/>
  <text x="655" y="165" text-anchor="middle" fill="#10b981" font-size="13" font-weight="700">Namespace: web</text>

  <g filter="url(#shadow)">
    <rect x="500" y="185" width="140" height="50" rx="6" fill="url(#blogGrad)"/>
    <text x="570" y="207" text-anchor="middle" fill="white" font-size="10" font-weight="600">Blog (Bun.js)</text>
    <text x="570" y="223" text-anchor="middle" fill="#d1fae5" font-size="8">2-5 replicas (HPA)</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="670" y="185" width="140" height="50" rx="6" fill="url(#pgGrad)"/>
    <text x="740" y="207" text-anchor="middle" fill="white" font-size="10" font-weight="600">PostgreSQL</text>
    <text x="740" y="223" text-anchor="middle" fill="#dbeafe" font-size="8">StatefulSet + PVC</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="500" y="260" width="140" height="50" rx="6" fill="url(#ollamaGrad)"/>
    <text x="570" y="282" text-anchor="middle" fill="white" font-size="10" font-weight="600">Ollama LLM</text>
    <text x="570" y="298" text-anchor="middle" fill="#e9d5ff" font-size="8">GPU inference</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="670" y="260" width="140" height="50" rx="6" fill="url(#blogGrad)"/>
    <text x="740" y="287" text-anchor="middle" fill="white" font-size="10" font-weight="600">Chat API</text>
    <text x="740" y="300" text-anchor="middle" fill="#d1fae5" font-size="8">Python/FastAPI</text>
  </g>

  <rect x="870" y="140" width="290" height="280" fill="#1e293b" stroke="#f59e0b" stroke-width="2" rx="8" stroke-dasharray="5,5"/>
  <text x="1015" y="165" text-anchor="middle" fill="#f59e0b" font-size="13" font-weight="700">Namespace: monitoring</text>

  <g filter="url(#shadow)">
    <rect x="890" y="185" width="120" height="50" rx="6" fill="url(#prometheusGrad)"/>
    <text x="950" y="215" text-anchor="middle" fill="white" font-size="10" font-weight="600">Prometheus</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="1020" y="185" width="120" height="50" rx="6" fill="url(#grafanaGrad)"/>
    <text x="1080" y="215" text-anchor="middle" fill="white" font-size="10" font-weight="600">Grafana</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="890" y="255" width="120" height="50" rx="6" fill="url(#lokiGrad)"/>
    <text x="950" y="285" text-anchor="middle" fill="white" font-size="10" font-weight="600">Loki</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="1020" y="255" width="120" height="50" rx="6" fill="url(#prometheusGrad)"/>
    <text x="1080" y="275" text-anchor="middle" fill="white" font-size="9" font-weight="600">Blackbox</text>
    <text x="1080" y="290" text-anchor="middle" fill="white" font-size="9" font-weight="600">Exporter</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="890" y="325" width="120" height="50" rx="6" fill="url(#lokiGrad)"/>
    <text x="950" y="355" text-anchor="middle" fill="white" font-size="10" font-weight="600">Promtail</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="1020" y="325" width="120" height="50" rx="6" fill="url(#prometheusGrad)"/>
    <text x="1080" y="345" text-anchor="middle" fill="white" font-size="9" font-weight="600">Alert</text>
    <text x="1080" y="360" text-anchor="middle" fill="white" font-size="9" font-weight="600">Manager</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="320" y="460" width="240" height="60" rx="8" fill="url(#fluxGrad)"/>
    <text x="440" y="485" text-anchor="middle" fill="white" font-size="12" font-weight="600">FluxCD</text>
    <text x="440" y="503" text-anchor="middle" fill="white" font-size="9">GitOps Controller</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="600" y="460" width="240" height="60" rx="8" fill="#374151"/>
    <text x="720" y="485" text-anchor="middle" fill="white" font-size="12" font-weight="600">Persistent Storage</text>
    <text x="720" y="503" text-anchor="middle" fill="#94a3b8" font-size="9">Local Path Provisioner</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="60" y="460" width="180" height="60" rx="8" fill="#24292f"/>
    <text x="150" y="485" text-anchor="middle" fill="white" font-size="11" font-weight="600">GitHub</text>
    <text x="150" y="503" text-anchor="middle" fill="#94a3b8" font-size="9">GitOps Repo</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="60" y="560" width="180" height="60" rx="8" fill="#2088FF"/>
    <text x="150" y="585" text-anchor="middle" fill="white" font-size="11" font-weight="600">GitHub Actions</text>
    <text x="150" y="603" text-anchor="middle" fill="white" font-size="9">Build &amp; Push Images</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="320" y="560" width="180" height="60" rx="8" fill="#00ADD8"/>
    <text x="410" y="585" text-anchor="middle" fill="white" font-size="11" font-weight="600">Docker Hub</text>
    <text x="410" y="603" text-anchor="middle" fill="white" font-size="9">Image Registry</text>
  </g>

  <path d="M 110 150 L 150 150" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrow)" fill="none"/>

  <path d="M 250 150 L 320 190" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrow)" fill="none"/>

  <path d="M 440 190 L 500 210" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrow)" fill="none"/>

  <path d="M 640 210 L 670 210" stroke="#10b981" stroke-width="1.5" marker-end="url(#arrow)" fill="none"/>
  
  <path d="M 440 190 L 540 190 L 540 285 L 670 285" stroke="#94a3b8" stroke-width="2" stroke-dasharray="4,4" marker-end="url(#arrow)" fill="transparent"/>
  
  <path d="M 670 285 L 640 285" stroke="#a855f7" stroke-width="1.5" marker-end="url(#arrow)" fill="none"/>

  <path d="M 240 490 L 320 490" stroke="#5468ff" stroke-width="1.5" stroke-dasharray="5,5" marker-end="url(#arrow)" fill="none"/>

  <path d="M 240 590 L 320 590" stroke="#2088FF" stroke-width="1.5" marker-end="url(#arrow)" fill="none"/>
  
  <path d="M 500 590 L 520 590 L 520 520" stroke="#00ADD8" stroke-width="1.5" stroke-dasharray="3,3" marker-end="url(#arrow)" fill="transparent"/>

  <!-- Monitoring connections -->
  <path d="M 890 210 L 810 210" stroke="#e6522c" stroke-width="1.5" stroke-dasharray="3,3" marker-end="url(#arrow)" fill="none"/>
  <path d="M 890 225 L 860 225 L 860 210 L 810 210" stroke="#e6522c" stroke-width="1.5" stroke-dasharray="3,3" marker-end="url(#arrow)" fill="none"/>
  <path d="M 890 195 L 850 195 L 850 130 L 440 130 L 440 160" stroke="#e6522c" stroke-width="1.5" stroke-dasharray="3,3" marker-end="url(#arrow)" fill="none"/>

  <!-- Storage connections -->
  <path d="M 740 460 L 740 235" stroke="#3b82f6" stroke-width="1.5" stroke-dasharray="3,3" marker-end="url(#arrow)" fill="none"/>

  <!-- FluxCD deployment connection -->
  <path d="M 440 460 L 440 380 L 570 380 L 570 235" stroke="#5468ff" stroke-width="1.5" stroke-dasharray="5,5" marker-end="url(#arrow)" fill="none"/>

  <!-- Internal monitoring stack connections -->
  <path d="M 950 325 L 950 305" stroke="#8b5cf6" stroke-width="1.5" stroke-dasharray="3,3" marker-end="url(#arrow)" fill="none"/>
  <path d="M 1010 210 L 1020 210" stroke="#f59e0b" stroke-width="1.5" stroke-dasharray="3,3" marker-end="url(#arrow)" fill="none"/>
  <path d="M 1010 280 L 1020 280" stroke="#8b5cf6" stroke-width="1.5" stroke-dasharray="3,3" marker-end="url(#arrow)" fill="none"/>
  <path d="M 1010 350 L 1020 350" stroke="#e6522c" stroke-width="1.5" stroke-dasharray="3,3" marker-end="url(#arrow)" fill="none"/>
  <path d="M 1080 325 L 1080 235" stroke="#e6522c" stroke-width="1.5" stroke-dasharray="3,3" marker-end="url(#arrow)" fill="none"/>

  <text x="130" y="140" text-anchor="middle" fill="#94a3b8" font-size="8">HTTPS</text>
  <text x="280" y="170" text-anchor="middle" fill="#94a3b8" font-size="8">proxy</text>
  <text x="470" y="200" text-anchor="middle" fill="#94a3b8" font-size="8">route</text>
  <text x="500" y="260" text-anchor="middle" fill="#94a3b8" font-size="8">/chat</text>
  <text x="280" y="480" text-anchor="middle" fill="#5468ff" font-size="8">reconcile</text>
  <text x="280" y="580" text-anchor="middle" fill="#2088FF" font-size="8">push</text>
  <text x="760" y="200" text-anchor="middle" fill="#e6522c" font-size="8">scrape</text>
  <text x="740" y="350" text-anchor="middle" fill="#3b82f6" font-size="8">PVC</text>
  <text x="510" y="370" text-anchor="middle" fill="#5468ff" font-size="8">deploy</text>
  <text x="965" y="315" text-anchor="middle" fill="#8b5cf6" font-size="8">logs</text>
  <text x="1015" y="200" text-anchor="middle" fill="#f59e0b" font-size="8">query</text>
  <text x="1015" y="270" text-anchor="middle" fill="#8b5cf6" font-size="8">query</text>
  <text x="1015" y="340" text-anchor="middle" fill="#e6522c" font-size="8">alerts</text>
  <text x="1095" y="280" text-anchor="middle" fill="#e6522c" font-size="8">alerts</text>
</svg>